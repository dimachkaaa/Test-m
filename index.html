<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="telegram-web-app" content="initData">
    <title>–ò–≥—Ä–æ–≤–æ–µ –º–µ–Ω—é</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;touch-action:manipulation;}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);color:white;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;overflow:hidden;}
        .game-menu{background:rgba(0,0,0,0.9);border-radius:20px;padding:25px;width:100%;max-width:400px;box-shadow:0 10px 30px rgba(0,150,255,0.3);border:2px solid rgba(0,180,216,0.3);text-align:center;}
        .game-title{font-size:28px;margin-bottom:25px;background:linear-gradient(45deg,#00b4d8,#90e0ef);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:bold;}
        .menu-items{display:flex;flex-direction:column;gap:12px;margin-bottom:25px;}
        .menu-button{background:linear-gradient(145deg,rgba(0,180,216,0.2),rgba(144,224,239,0.1));border:2px solid rgba(0,180,216,0.4);color:white;padding:16px 24px;font-size:18px;border-radius:12px;cursor:pointer;transition:all 0.2s;font-weight:500;-webkit-tap-highlight-color:transparent;}
        .menu-button:active{transform:scale(0.98);background:rgba(0,180,216,0.3);}
        .menu-button:hover{background:rgba(0,180,216,0.25);}
        .settings-panel{background:rgba(255,255,255,0.05);border-radius:12px;padding:20px;margin-top:20px;display:none;animation:fadeIn 0.3s;}
        @keyframes fadeIn{from{opacity:0;transform:translateY(-10px);}to{opacity:1;transform:translateY(0);}}
        .setting-item{display:flex;justify-content:space-between;align-items:center;margin:12px 0;font-size:16px;}
        .slider{width:60%;height:8px;-webkit-appearance:none;background:rgba(255,255,255,0.1);border-radius:4px;outline:none;}
        .slider::-webkit-slider-thumb{-webkit-appearance:none;width:22px;height:22px;border-radius:50%;background:#00b4d8;cursor:pointer;border:2px solid white;}
        select{background:rgba(0,0,0,0.5);color:white;padding:8px 12px;border-radius:8px;border:1px solid rgba(0,180,216,0.3);font-size:16px;}
        .version{color:rgba(255,255,255,0.4);font-size:14px;margin-top:20px;padding-top:15px;border-top:1px solid rgba(255,255,255,0.1);}
        .stats{display:flex;justify-content:space-around;margin-top:20px;font-size:14px;color:rgba(255,255,255,0.7);}
        .stat-item{text-align:center;}
        .stat-value{font-size:20px;color:#00b4d8;font-weight:bold;}
    </style>
</head>
<body>
    <div class="game-menu">
        <h1 class="game-title">üöÄ –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –ò–≥—Ä–∞</h1>
        
        <div class="menu-items">
            <button class="menu-button" onclick="startGame()">üéÆ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            <button class="menu-button" onclick="openSettings()">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            <button class="menu-button" onclick="showAbout()">‚ÑπÔ∏è –û–± –∏–≥—Ä–µ</button>
            <button class="menu-button" onclick="showLeaderboard()">üèÜ –†–µ–π—Ç–∏–Ω–≥</button>
        </div>

        <div class="settings-panel" id="settingsPanel">
            <div class="setting-item">
                <span>üîä –ì—Ä–æ–º–∫–æ—Å—Ç—å:</span>
                <input type="range" min="0" max="100" value="70" class="slider" id="volumeSlider">
            </div>
            <div class="setting-item">
                <span>üéØ –°–ª–æ–∂–Ω–æ—Å—Ç—å:</span>
                <select id="difficulty">
                    <option value="easy">üü¢ –õ–µ–≥–∫–∞—è</option>
                    <option value="normal" selected>üü° –ù–æ—Ä–º–∞–ª—å–Ω–∞—è</option>
                    <option value="hard">üî¥ –°–ª–æ–∂–Ω–∞—è</option>
                </select>
            </div>
            <div class="setting-item">
                <span>üì± –í–∏–±—Ä–∞—Ü–∏—è:</span>
                <input type="checkbox" id="vibration" checked style="width:20px;height:20px;">
            </div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="score">0</div>
                <div>–û—á–∫–∏</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="level">1</div>
                <div>–£—Ä–æ–≤–µ–Ω—å</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="coins">100</div>
                <div>–ú–æ–Ω–µ—Ç—ã</div>
            </div>
        </div>

        <div class="version">–í–µ—Ä—Å–∏—è 1.0 | Telegram Web App</div>
    </div>

    <script>
        // Telegram Web App API
        const tg = window.Telegram?.WebApp;
        
        if (tg) {
            tg.ready();
            tg.expand();
            tg.enableClosingConfirmation();
            
            // –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
            tg.BackButton.onClick(() => {
                if (document.getElementById('settingsPanel').style.display === 'block') {
                    openSettings();
                } else {
                    tg.close();
                }
            });
        }

        let gameScore = 0;
        let gameLevel = 1;
        let gameCoins = 100;

        function startGame() {
            gameScore += 100;
            gameLevel++;
            gameCoins += 50;
            
            document.getElementById('score').textContent = gameScore;
            document.getElementById('level').textContent = gameLevel;
            document.getElementById('coins').textContent = gameCoins;
            
            if (tg) {
                tg.showAlert(`üéØ –û—á–∫–∏: +100\nüìà –£—Ä–æ–≤–µ–Ω—å: ${gameLevel}\nüí∞ –ú–æ–Ω–µ—Ç—ã: +50`);
            } else {
                alert('üéÆ –ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å!\n–û—á–∫–∏: +100\n–£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–µ–Ω!');
            }
            
            // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
            if (navigator.vibrate && document.getElementById('vibration').checked) {
                navigator.vibrate(50);
            }
        }

        function openSettings() {
            const panel = document.getElementById('settingsPanel');
            const isVisible = panel.style.display === 'block';
            panel.style.display = isVisible ? 'none' : 'block';
            
            if (!isVisible && tg) {
                tg.BackButton.show();
            } else if (isVisible && tg) {
                tg.BackButton.hide();
            }
        }

        function showAbout() {
            const message = "üöÄ –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –ò–≥—Ä–∞\n\n" +
                          "–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∫–æ—Ä–∞–±–ª–µ–º, —Å–±–∏–≤–∞–π—Ç–µ –≤—Ä–∞–≥–æ–≤\n" +
                          "–∏ —Å–æ–±–∏—Ä–∞–π—Ç–µ –±–æ–Ω—É—Å—ã!\n\n" +
                          "üî´ –û—Ä—É–∂–∏–µ: –õ–∞–∑–µ—Ä–Ω—ã–µ –ø—É—à–∫–∏\n" +
                          "üõ°Ô∏è –ó–∞—â–∏—Ç–∞: –©–∏—Ç—ã\n" +
                          "‚ö° –ë–æ–Ω—É—Å—ã: –£—Å–∫–æ—Ä–µ–Ω–∏–µ, —â–∏—Ç—ã\n\n" +
                          "¬© 2024 SpaceGame Studio";
            
            if (tg) {
                tg.showAlert(message);
            } else {
                alert(message);
            }
        }

        function showLeaderboard() {
            const leaders = [
                {name: "–ö–æ—Å–º–æ–Ω–∞–≤—Ç", score: 12500},
                {name: "–ó–≤–µ–∑–¥–æ—á–µ—Ç", score: 9800},
                {name: "–ü–∏–ª–æ—Ç", score: 7600},
                {name: "–ù–æ–≤–∏—á–æ–∫", score: 3200}
            ];
            
            let leaderboardText = "üèÜ –¢–û–ü –ò–ì–†–û–ö–û–í:\n\n";
            leaders.forEach((leader, index) => {
                leaderboardText += `${index + 1}. ${leader.name} - ${leader.score} –æ—á–∫–æ–≤\n`;
            });
            
            if (tg) {
                tg.showAlert(leaderboardText);
            } else {
                alert(leaderboardText);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        document.getElementById('volumeSlider').addEventListener('input', function(e) {
            console.log('–ì—Ä–æ–º–∫–æ—Å—Ç—å:', e.target.value + '%');
        });
        
        document.getElementById('difficulty').addEventListener('change', function(e) {
            console.log('–°–ª–æ–∂–Ω–æ—Å—Ç—å:', e.target.value);
        });
        
        document.getElementById('vibration').addEventListener('change', function(e) {
            console.log('–í–∏–±—Ä–∞—Ü–∏—è:', e.target.checked ? '–≤–∫–ª' : '–≤—ã–∫–ª');
        });

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('.game-menu').style.opacity = '0';
            document.querySelector('.game-menu').style.transform = 'translateY(20px)';
            
            setTimeout(() => {
                document.querySelector('.game-menu').style.transition = 'all 0.5s ease';
                document.querySelector('.game-menu').style.opacity = '1';
                document.querySelector('.game-menu').style.transform = 'translateY(0)';
            }, 100);
        });
    </script>
</body>
</html>
